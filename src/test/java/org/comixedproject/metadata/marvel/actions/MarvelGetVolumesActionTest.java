/*
 * ComiXed - A digital comic book library management application.
 * Copyright (C) 2024, The ComiXed Project
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses>
 */

package org.comixedproject.metadata.marvel.actions;

import static org.junit.Assert.*;

import java.io.IOException;
import java.util.List;
import okhttp3.mockwebserver.MockResponse;
import okhttp3.mockwebserver.MockWebServer;
import org.comixedproject.metadata.MetadataException;
import org.comixedproject.metadata.model.VolumeMetadata;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.junit.MockitoJUnitRunner;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;

@RunWith(MockitoJUnitRunner.class)
public class MarvelGetVolumesActionTest {
  private static final String TEST_SERIES = "spider-man";
  private static final String TEST_PUBLIC_KEY = "The.Public.Key";
  private static final String TEST_PRIVATE_KEY = "The.Private.Key";
  private static final String TEST_BAD_RESPONSE = "This is not good data";
  private static final String TEST_GOOD_RESPONSE =
      "{\"code\":200,\"status\":\"Ok\",\"copyright\":\"© 2024 MARVEL\",\"attributionText\":\"Data provided by Marvel. © 2024 MARVEL\",\"attributionHTML\":\"<a href=\\\"http://marvel.com\\\">Data provided by Marvel. © 2024 MARVEL</a>\",\"etag\":\"73300140f425c823e8247f0e36259817a15baa61\",\"data\":{\"offset\":0,\"limit\":20,\"total\":4,\"count\":4,\"results\":[{\"id\":2069,\"title\":\"Spider-Man (1990 - 1998)\",\"description\":null,\"resourceURI\":\"http://gateway.marvel.com/v1/public/series/2069\",\"urls\":[{\"type\":\"detail\",\"url\":\"http://marvel.com/comics/series/2069/spider-man_1990_-_1998?utm_campaign=apiRef&utm_source=763df8a7c3c0f6d3bb7fcf088bbf6ee1\"}],\"startYear\":1990,\"endYear\":1998,\"rating\":\"\",\"type\":\"\",\"modified\":\"2013-03-19T16:14:02-0400\",\"thumbnail\":{\"path\":\"http://i.annihil.us/u/prod/marvel/i/mg/7/10/5148c670b8fe9\",\"extension\":\"jpg\"},\"creators\":{\"available\":62,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/2069/creators\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/807\",\"name\":\"Comicraft\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/2529\",\"name\":\"Liz Agraphiotis\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/452\",\"name\":\"Virtual Calligr\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12581\",\"name\":\"Vc Chris Eliopoulos\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/2112\",\"name\":\"Larry Alexander\",\"role\":\"penciller (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/1935\",\"name\":\"Paul Becton\",\"role\":\"colorist\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/3927\",\"name\":\"But Not on an actual published Comic\",\"role\":\"colorist\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/1224\",\"name\":\"Hi-Fi Design\",\"role\":\"colorist\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/1945\",\"name\":\"Mark Bernardo\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/3395\",\"name\":\"Dan Cuddy\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/9565\",\"name\":\"Tom Defalco\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/6049\",\"name\":\"Danny Fingeroth\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/375\",\"name\":\"Bob Harras\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/4131\",\"name\":\"Matt Hicks\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/1185\",\"name\":\"Pat Broderick\",\"role\":\"penciler\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/2427\",\"name\":\"Sam DeLaRosa\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/362\",\"name\":\"Scott Hanna\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/6986\",\"name\":\"J. M. DeMatteis\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13183\",\"name\":\"J.M. DeMatteis\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/682\",\"name\":\"Todd Dezago\",\"role\":\"writer\"}],\"returned\":20},\"characters\":{\"available\":31,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/2069/characters\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1010354\",\"name\":\"Adam Warlock\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009175\",\"name\":\"Beast\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009218\",\"name\":\"Calypso\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009220\",\"name\":\"Captain America\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009243\",\"name\":\"Colossus\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009254\",\"name\":\"Crusher Hogan\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1010890\",\"name\":\"Deathlok\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009299\",\"name\":\"Fantastic Four\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1010925\",\"name\":\"Ghost Rider (Daniel Ketch)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009318\",\"name\":\"Ghost Rider (Johnny Blaze)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009347\",\"name\":\"Hobgoblin (Roderick Kingsley)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009351\",\"name\":\"Hulk\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009391\",\"name\":\"Kraven the Hunter\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009404\",\"name\":\"Lizard\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009708\",\"name\":\"Mary Jane Watson\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009454\",\"name\":\"Morbius\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009459\",\"name\":\"Mr. Fantastic\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009325\",\"name\":\"Norman Osborn\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009477\",\"name\":\"Nova\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009513\",\"name\":\"Puck\"}],\"returned\":20},\"stories\":{\"available\":311,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/2069/stories\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23741\",\"name\":\"Cover #23741\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23742\",\"name\":\"A Prelude in Red\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23743\",\"name\":\"Post It to Peter!\",\"type\":\"letters\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23744\",\"name\":\" Spider-Man (1990) #1\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23745\",\"name\":\"Torment Part 1\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23746\",\"name\":\"interior to Spider-Man (1990) #10\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23747\",\"name\":\"interior to Spider-Man (1990) #11\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23748\",\"name\":\"interior to Spider-Man (1990) #12\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23749\",\"name\":\"interior to Spider-Man (1990) #13\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23750\",\"name\":\"interior to Spider-Man (1990) #14\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23751\",\"name\":\"interior to Spider-Man (1990) #15\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23752\",\"name\":\"\",\"type\":\"\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23753\",\"name\":\"\",\"type\":\"\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23754\",\"name\":\"interior to Spider-Man (1990) #18\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23755\",\"name\":\"interior to Spider-Man (1990) #19\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23756\",\"name\":\" Spider-Man (1990) #2\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23757\",\"name\":\"Torment, Part 2\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23758\",\"name\":\"Spider Mania\",\"type\":\"text article\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23759\",\"name\":\"interior to Spider-Man (1990) #20\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/23760\",\"name\":\"interior to Spider-Man (1990) #21\",\"type\":\"interiorStory\"}],\"returned\":20},\"comics\":{\"available\":103,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/2069/comics\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10766\",\"name\":\"Spider-Man (1990) #1\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10767\",\"name\":\"Spider-Man (1990) #1\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10778\",\"name\":\"Spider-Man (1990) #2\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10789\",\"name\":\"Spider-Man (1990) #3\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104624\",\"name\":\"Spider-Man (1990) #3 (veve)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104625\",\"name\":\"Spider-Man (1990) #3 (veve)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104626\",\"name\":\"Spider-Man (1990) #3 (veve)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104627\",\"name\":\"Spider-Man (1990) #3 (veve)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10800\",\"name\":\"Spider-Man (1990) #4\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10811\",\"name\":\"Spider-Man (1990) #5\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10822\",\"name\":\"Spider-Man (1990) #6\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10833\",\"name\":\"Spider-Man (1990) #7\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10844\",\"name\":\"Spider-Man (1990) #8\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10855\",\"name\":\"Spider-Man (1990) #9\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10768\",\"name\":\"Spider-Man (1990) #10\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10769\",\"name\":\"Spider-Man (1990) #11\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10770\",\"name\":\"Spider-Man (1990) #12\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10771\",\"name\":\"Spider-Man (1990) #13\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10772\",\"name\":\"Spider-Man (1990) #14\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/10773\",\"name\":\"Spider-Man (1990) #15\"}],\"returned\":20},\"events\":{\"available\":3,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/2069/events\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/events/29\",\"name\":\"Infinity War\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/events/151\",\"name\":\"Maximum Carnage\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/events/154\",\"name\":\"Onslaught\"}],\"returned\":3},\"next\":null,\"previous\":null},{\"id\":20508,\"title\":\"Spider-Man (2016 - 2018)\",\"description\":null,\"resourceURI\":\"http://gateway.marvel.com/v1/public/series/20508\",\"urls\":[{\"type\":\"detail\",\"url\":\"http://marvel.com/comics/series/20508/spider-man_2016_-_2018?utm_campaign=apiRef&utm_source=763df8a7c3c0f6d3bb7fcf088bbf6ee1\"}],\"startYear\":2016,\"endYear\":2018,\"rating\":\"Rated T\",\"type\":\"ongoing\",\"modified\":\"2018-04-25T16:07:29-0400\",\"thumbnail\":{\"path\":\"http://i.annihil.us/u/prod/marvel/i/mg/7/50/5a9727c8e2c97\",\"extension\":\"jpg\"},\"creators\":{\"available\":27,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/20508/creators\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/11575\",\"name\":\"Kris Anka\",\"role\":\"penciller (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12976\",\"name\":\"Patrick Brown\",\"role\":\"penciller (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/9408\",\"name\":\"Sara Pichelli\",\"role\":\"penciller (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/87\",\"name\":\"Mark Bagley\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/436\",\"name\":\"Adi Granov\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/11610\",\"name\":\"David Marquez\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12998\",\"name\":\"Jan Bazaldua\",\"role\":\"penciler\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/24\",\"name\":\"Brian Michael Bendis\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13068\",\"name\":\"J. Scott Campbell\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13506\",\"name\":\"Gaetano Carlucci\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12480\",\"name\":\"Szymon Kudranski\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13033\",\"name\":\"Nico Leon\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/9096\",\"name\":\"Michael Cho\",\"role\":\"painter (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/10172\",\"name\":\"Vc Clayton Cowles\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12980\",\"name\":\"Vc Cory Petit\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/8028\",\"name\":\"Andrew Crossley\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13036\",\"name\":\"Emilio Lopez\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/426\",\"name\":\"Jason Keith\",\"role\":\"colorist\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12696\",\"name\":\"Nico Leon\",\"role\":\"penciller\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/4300\",\"name\":\"Nick Lowe\",\"role\":\"editor\"}],\"returned\":20},\"characters\":{\"available\":12,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/20508/characters\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009185\",\"name\":\"Black Cat\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1010338\",\"name\":\"Captain Marvel (Carol Danvers)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009287\",\"name\":\"Electro\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009334\",\"name\":\"Hammerhead\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009368\",\"name\":\"Iron Man\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009378\",\"name\":\"Jessica Jones\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1017577\",\"name\":\"Ms. Marvel (Kamala Khan)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1017078\",\"name\":\"Nova (Sam Alexander)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009558\",\"name\":\"Sandman\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1011265\",\"name\":\"Sinister Six\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1017603\",\"name\":\"Spider-Gwen (Gwen Stacy)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1016181\",\"name\":\"Spider-Man (Miles Morales)\"}],\"returned\":12},\"stories\":{\"available\":74,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/20508/stories\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122429\",\"name\":\"cover from Spider-Man (2015) #1\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122430\",\"name\":\"story from Spider-Man (2015) #1\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122433\",\"name\":\"cover from Spider-Man (2015) #2\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122434\",\"name\":\"story from Spider-Man (2015) #2\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122437\",\"name\":\"cover from Spider-Man (2015) #3\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122438\",\"name\":\"story from Spider-Man (2015) #3\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122439\",\"name\":\"cover from Spider-Man (2015) #4\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122440\",\"name\":\"story from Spider-Man (2015) #4\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122441\",\"name\":\"cover from Spider-Man (2015) #5\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122442\",\"name\":\"story from Spider-Man (2015) #5\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122443\",\"name\":\"cover from Spider-Man (2015) #6\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122444\",\"name\":\"story from Spider-Man (2015) #6\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122445\",\"name\":\"cover from Spider-Man (2015) #7\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122446\",\"name\":\"story from Spider-Man (2015) #7\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122447\",\"name\":\"cover from Spider-Man (2015) #8\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122448\",\"name\":\"story from Spider-Man (2015) #8\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122449\",\"name\":\"cover from Spider-Man (2015) #9\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122450\",\"name\":\"story from Spider-Man (2015) #9\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122451\",\"name\":\"cover from Spider-Man (2015) #10\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/122452\",\"name\":\"story from Spider-Man (2015) #10\",\"type\":\"interiorStory\"}],\"returned\":20},\"comics\":{\"available\":37,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/20508/comics\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55693\",\"name\":\"Spider-Man (2016) #1\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55973\",\"name\":\"Spider-Man (2016) #1 (Granov Hip-&#8203;Hop Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/57126\",\"name\":\"Spider-Man (2016) #1 (Bagley Classic Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/58249\",\"name\":\"Spider-Man (2016) #1 (Michael Cho Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/58479\",\"name\":\"Spider-Man (2016) #1 (Young Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55695\",\"name\":\"Spider-Man (2016) #2\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/58614\",\"name\":\"Spider-Man (2016) #2 (Campbell Captain America 75th Anniversary Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/59117\",\"name\":\"Spider-Man (2016) #2 (Tbd Artist Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55697\",\"name\":\"Spider-Man (2016) #3\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55698\",\"name\":\"Spider-Man (2016) #4\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55699\",\"name\":\"Spider-Man (2016) #5\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55700\",\"name\":\"Spider-Man (2016) #6\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/59551\",\"name\":\"Spider-Man (2016) #6 (Anka Mighty Men Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55701\",\"name\":\"Spider-Man (2016) #7\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/60321\",\"name\":\"Spider-Man (2016) #7 (Shalvey Black Panther Variant Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55702\",\"name\":\"Spider-Man (2016) #8\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/61136\",\"name\":\"Spider-Man (2016) #8 (Cosplay Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55703\",\"name\":\"Spider-Man (2016) #9\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55704\",\"name\":\"Spider-Man (2016) #10\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/55705\",\"name\":\"Spider-Man (2016) #11\"}],\"returned\":20},\"events\":{\"available\":0,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/20508/events\",\"items\":[],\"returned\":0},\"next\":null,\"previous\":null},{\"id\":27022,\"title\":\"Spider-Man (2019 - 2020)\",\"description\":null,\"resourceURI\":\"http://gateway.marvel.com/v1/public/series/27022\",\"urls\":[{\"type\":\"detail\",\"url\":\"http://marvel.com/comics/series/27022/spider-man_2019_-_2020?utm_campaign=apiRef&utm_source=763df8a7c3c0f6d3bb7fcf088bbf6ee1\"}],\"startYear\":2019,\"endYear\":2020,\"rating\":\"\",\"type\":\"\",\"modified\":\"2019-09-17T09:03:44-0400\",\"thumbnail\":{\"path\":\"http://i.annihil.us/u/prod/marvel/i/mg/c/80/5d7f8ea044d4c\",\"extension\":\"jpg\"},\"creators\":{\"available\":18,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/27022/creators\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13984\",\"name\":\"Henry Abrams\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/14057\",\"name\":\"J.J Abrams\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13985\",\"name\":\"JJ Abrams\",\"role\":\"writer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/1141\",\"name\":\"Giuseppe Camuncoli\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12999\",\"name\":\"Will Sliney\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/5251\",\"name\":\"Vc Joe Caramagna\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/6170\",\"name\":\"Olivier Coipel\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/8522\",\"name\":\"Gabriele Dell'otto\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/649\",\"name\":\"Ed Mcguinness\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13021\",\"name\":\"David Curiel\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/430\",\"name\":\"Edgar Delgado\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/4306\",\"name\":\"Laura Martin\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/501\",\"name\":\"Dave Stewart\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13174\",\"name\":\"Elisabetta D'AMICO\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/9408\",\"name\":\"Sara Pichelli\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13867\",\"name\":\"Chip Kidd\",\"role\":\"painter (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/4300\",\"name\":\"Nick Lowe\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13127\",\"name\":\"Emily Newcomen\",\"role\":\"editor\"}],\"returned\":18},\"characters\":{\"available\":2,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/27022/characters\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009708\",\"name\":\"Mary Jane Watson\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009610\",\"name\":\"Spider-Man (Peter Parker)\"}],\"returned\":2},\"stories\":{\"available\":34,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/27022/stories\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167103\",\"name\":\"cover from Special Spider (2029) #1\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167104\",\"name\":\"story from Special Spider (2029) #1\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167105\",\"name\":\"cover from Special Spider (2029) #2\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167106\",\"name\":\"story from Special Spider (2029) #2\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167107\",\"name\":\"cover from Special Spider (2029) #3\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167108\",\"name\":\"story from Special Spider (2029) #3\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167109\",\"name\":\"cover from Special Spider (2029) #4\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167110\",\"name\":\"story from Special Spider (2029) #4\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167111\",\"name\":\"cover from Special Spider (2029) #5\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/167112\",\"name\":\"story from Special Spider (2029) #5\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173740\",\"name\":\"cover from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173741\",\"name\":\"story from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173742\",\"name\":\"cover from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173743\",\"name\":\"story from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173744\",\"name\":\"cover from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173745\",\"name\":\"story from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173746\",\"name\":\"cover from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173747\",\"name\":\"story from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173748\",\"name\":\"cover from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/173749\",\"name\":\"story from Spider-Man (2019) #1 (VARIANT)\",\"type\":\"interiorStory\"}],\"returned\":20},\"comics\":{\"available\":16,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/27022/comics\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/75132\",\"name\":\"Spider-Man (2019) #1\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78364\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78365\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78366\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78367\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78362\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78363\",\"name\":\"Spider-Man (2019) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/75133\",\"name\":\"Spider-Man (2019) #2\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/78834\",\"name\":\"Spider-Man (2019) #2 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/75134\",\"name\":\"Spider-Man (2019) #3\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/81801\",\"name\":\"Spider-Man (2019) #3 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/82487\",\"name\":\"Spider-Man (2019) #3 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/75135\",\"name\":\"Spider-Man (2019) #4\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/83316\",\"name\":\"Spider-Man (2019) #4 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/83315\",\"name\":\"Spider-Man (2019) #4 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/75136\",\"name\":\"Spider-Man (2019) #5\"}],\"returned\":16},\"events\":{\"available\":0,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/27022/events\",\"items\":[],\"returned\":0},\"next\":null,\"previous\":null},{\"id\":34328,\"title\":\"Spider-Man (2022 - Present)\",\"description\":null,\"resourceURI\":\"http://gateway.marvel.com/v1/public/series/34328\",\"urls\":[{\"type\":\"detail\",\"url\":\"http://marvel.com/comics/series/34328/spider-man_2022_-_present?utm_campaign=apiRef&utm_source=763df8a7c3c0f6d3bb7fcf088bbf6ee1\"}],\"startYear\":2022,\"endYear\":2099,\"rating\":\"\",\"type\":\"\",\"modified\":\"2022-10-04T22:47:14-0400\",\"thumbnail\":{\"path\":\"http://i.annihil.us/u/prod/marvel/i/mg/6/20/633cf022e746b\",\"extension\":\"jpg\"},\"creators\":{\"available\":35,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/34328/creators\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/11482\",\"name\":\"Jesus Aburtov\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13180\",\"name\":\"Federico Blee\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13250\",\"name\":\"Romulo Fajardo Jr.\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/872\",\"name\":\"Marte Gracia\",\"role\":\"colorist (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/87\",\"name\":\"Mark Bagley\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/14380\",\"name\":\"Karen Darboe\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/571\",\"name\":\"Rob Liefeld\",\"role\":\"penciler (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/12309\",\"name\":\"George Beliard\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/4300\",\"name\":\"Nick Lowe\",\"role\":\"editor\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13025\",\"name\":\"Bengal\",\"role\":\"painter (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/10405\",\"name\":\"John Tyler Christopher\",\"role\":\"painter (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/10785\",\"name\":\"Stephanie Hans\",\"role\":\"painter (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/5251\",\"name\":\"Vc Joe Caramagna\",\"role\":\"letterer\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/162\",\"name\":\"John Cassaday\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/10355\",\"name\":\"Carlos Gomez\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/13260\",\"name\":\"Jp Mayer\",\"role\":\"inker (cover)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/430\",\"name\":\"Edgar Delgado\",\"role\":\"colorist\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/359\",\"name\":\"John Dell\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/548\",\"name\":\"Andrew Hennessy\",\"role\":\"inker\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/creators/11765\",\"name\":\"Christos Gage\",\"role\":\"writer\"}],\"returned\":20},\"characters\":{\"available\":12,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/34328/characters\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009262\",\"name\":\"Daredevil\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009287\",\"name\":\"Electro\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1011088\",\"name\":\"Morlun\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009325\",\"name\":\"Norman Osborn\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1017815\",\"name\":\"Silk (Cindy Moon)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009157\",\"name\":\"Spider-Girl (Anya Corazon)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1017603\",\"name\":\"Spider-Gwen (Gwen Stacy)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1016181\",\"name\":\"Spider-Man (Miles Morales)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1012295\",\"name\":\"Spider-Man (Noir)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009610\",\"name\":\"Spider-Man (Peter Parker)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1010795\",\"name\":\"Spider-Woman (Charlotte Witter)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/characters/1009608\",\"name\":\"Spider-Woman (Jessica Drew)\"}],\"returned\":12},\"stories\":{\"available\":84,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/34328/stories\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220586\",\"name\":\"cover from Spider-Man (2022) #1\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220587\",\"name\":\"story from Spider-Man (2022) #1\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220588\",\"name\":\"cover from Spider-Man (2022) #2\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220589\",\"name\":\"story from Spider-Man (2022) #2\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220590\",\"name\":\"cover from Spider-Man (2022) #3\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220591\",\"name\":\"story from Spider-Man (2022) #3\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220592\",\"name\":\"cover from Spider-Man (2022) #4\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220593\",\"name\":\"story from Spider-Man (2022) #4\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220594\",\"name\":\"cover from Spider-Man (2022) #5\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220595\",\"name\":\"story from Spider-Man (2022) #5\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220596\",\"name\":\"cover from Spider-Man (2022) #6\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220597\",\"name\":\"story from Spider-Man (2022) #6\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220598\",\"name\":\"cover from Spider-Man (2022) #7\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220599\",\"name\":\"story from Spider-Man (2022) #7\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220600\",\"name\":\"cover from Spider-Man (2022) #8\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220601\",\"name\":\"story from Spider-Man (2022) #8\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220602\",\"name\":\"cover from Spider-Man (2022) #9\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220603\",\"name\":\"story from Spider-Man (2022) #9\",\"type\":\"interiorStory\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220604\",\"name\":\"cover from Spider-Man (2022) #10\",\"type\":\"cover\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/stories/220605\",\"name\":\"story from Spider-Man (2022) #10\",\"type\":\"interiorStory\"}],\"returned\":20},\"comics\":{\"available\":36,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/34328/comics\",\"items\":[{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/99743\",\"name\":\"Spider-Man (2022) #1\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105043\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105044\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105869\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/102588\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104612\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104613\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105785\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104614\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/104615\",\"name\":\"Spider-Man (2022) #1 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/99744\",\"name\":\"Spider-Man (2022) #2\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105309\",\"name\":\"Spider-Man (2022) #2 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105403\",\"name\":\"Spider-Man (2022) #2 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/107467\",\"name\":\"Spider-Man (2022) #2 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105786\",\"name\":\"Spider-Man (2022) #2 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/99745\",\"name\":\"Spider-Man (2022) #3\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/106432\",\"name\":\"Spider-Man (2022) #3 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/99746\",\"name\":\"Spider-Man (2022) #4\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105676\",\"name\":\"Spider-Man (2022) #4 (Variant)\"},{\"resourceURI\":\"http://gateway.marvel.com/v1/public/comics/105788\",\"name\":\"Spider-Man (2022) #4 (Variant)\"}],\"returned\":20},\"events\":{\"available\":0,\"collectionURI\":\"http://gateway.marvel.com/v1/public/series/34328/events\",\"items\":[],\"returned\":0},\"next\":null,\"previous\":null}]}}";

  @InjectMocks private MarvelGetVolumesAction action;

  public MockWebServer marvelServer;

  @Before
  public void setUp() throws IOException {
    marvelServer = new MockWebServer();
    marvelServer.start();

    final String hostname = String.format("http://localhost:%s", this.marvelServer.getPort());
    action.setBaseUrl(hostname);
    action.setPublicKey(TEST_PUBLIC_KEY);
    action.setPrivateKey(TEST_PRIVATE_KEY);
    action.setSeries(TEST_SERIES);
  }

  @After
  public void tearDown() throws IOException {
    marvelServer.shutdown();
  }

  @Test(expected = MetadataException.class)
  public void testExecute_noPublicKeyDefined() throws MetadataException {
    action.setPublicKey("");

    action.execute();
  }

  @Test(expected = MetadataException.class)
  public void testExecute_noPrivateKeyDefined() throws MetadataException {
    action.setPrivateKey("");
    action.execute();
  }

  @Test(expected = MetadataException.class)
  public void testExecute_noSeriesDefined() throws MetadataException {
    action.setSeries("");

    action.execute();
  }

  @Test(expected = MetadataException.class)
  public void testExecute_badResponse() throws MetadataException {
    this.marvelServer.enqueue(
        new MockResponse()
            .setBody(TEST_BAD_RESPONSE)
            .addHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE));

    action.execute();
  }

  @Test
  public void testExecute() throws MetadataException {
    this.marvelServer.enqueue(
        new MockResponse()
            .setBody(TEST_GOOD_RESPONSE)
            .addHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE));

    final List<VolumeMetadata> result = action.execute();

    assertNotNull(result);
    assertFalse(result.isEmpty());
  }
}
